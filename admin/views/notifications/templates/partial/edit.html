<div xmlns="http://www.w3.org/1999/xhtml">
    <form class="form" ng-submit="saveNotificationTemplate(createNotificationTemplateForm)"
        name="createNotificationTemplateForm" novalidate="novalidate" autocomplete="off">
        <div class="accordion mb-2" id="templateAccordion">
            <ul class="list-unstyled mb-0">
                <li>
                    <div class="card">
                        <div class="card-header">
                            <h2 class="mb-0">
                                <button type="button" class="collapse-indicator btn btn-link p-0" data-toggle="collapse"
                                    data-target="#coreTemplateProps" aria-expanded="true">
                                    <i class="fa fa-clipboard"></i> {{ 'ui.admin.notifications.templates.names' | i18n
                                    }}
                                    <i class="fa fa-chevron-right"></i>
                                </button>
                            </h2>
                        </div>
                        <div class="collapse show" id="coreTemplateProps">
                            <div class="card-body container-fluid">
                                <!-- name -->
                                <div class="form-group row">
                                    <label class="col-sm-12 col-md-3 control-label">
                                        {{'ui.admin.notifications.templates.templateName' | i18n}}
                                    </label>
                                    <div class="col-sm-12 col-md-9">
                                        <input autocomplete="__away" type="text" maxlength="64"
                                            ng-model="notificationTemplate.name" name="notificationTemplateName"
                                            required="required" class="form-control" pattern="^[a-zA-Z0-9_\-]{2,}$" />
                                    </div>
                                </div>

                                <!-- mnemonic -->
                                <div class="form-group row">
                                    <label class="col-sm-12 col-md-3 control-label">
                                        {{'ui.admin.notifications.templates.templateMnemonic' | i18n}}
                                    </label>
                                    <div class="col-sm-12 col-md-9">
                                        <input autocomplete="__away" type="text" maxlength="64"
                                            ng-model="notificationTemplate.mnemonic" name="notificationTemplateMnemonic"
                                            required="required" class="form-control" pattern="^[a-zA-Z0-9_\-]{2,}$" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>

                <li>
                    <div class="card">
                        <div class="card-header">
                            <h2 class="mb-0">
                                <button type="button" class="collapse-indicator btn btn-link p-0" data-toggle="collapse"
                                    aria-expanded="true" data-target="#parametersProps">
                                    <i class="fa fa-list"></i> {{ 'ui.admin.notifications.templates.parameters' | i18n
                                    }}
                                    <i class="fa fa-chevron-right"></i>
                                </button>
                            </h2>
                        </div>
                        <div class="collapse show" id="parametersProps">
                            <div class="card-body container-fluid">
                                <!-- Parameters -->
                                <ul class="list-unstyled mb-0">
                                    <li ng-repeat="param in formData.parameters track by $index">
                                        <div class="form-group row">
                                            <label class="col-sm-12 col-md-3">
                                                <input type="text" maxlength="64" ng-model="param.Name"
                                                    name="notificationTemplateParameterName" required="required"
                                                    class="form-control"
                                                    placeholder="{{'ui.admin.notifications.templates.parameterName' | i18n}}" />
                                            </label>
                                            <div class="col-sm-11 col-md-8">
                                                <input autocomplete="__away" type="text" maxlength="128"
                                                    ng-model="param.Description"
                                                    name="notificationTemplateParameterDescription" required="required"
                                                    class="form-control"
                                                    placeholder="{{ 'ui.admin.notifications.templates.parameterDescription' | i18n }}" />
                                            </div>
                                            <div class="col-sm-1 col-md-1" ng-if="$index!==0">
                                                <button type="button" ng-click="formData.parameters.splice($index, 1)"
                                                    class="btn btn-danger"><i
                                                        class="fas fa-fw fa-times-circle"></i></button>
                                            </div>
                                        </div>
                                    </li>
                                </ul>

                                <button type="button"
                                    ng-click="formData.parameters.push(newParameter); newParameter = {}"
                                    class="btn btn-success">
                                    <i class="fas fa-plus-cricle"></i> {{
                                    'ui.admin.notifications.templates.addParameter' |
                                    i18n
                                    }}
                                </button>
                            </div>
                        </div>
                    </div>
                </li>

                <li ng-repeat="template in formData.templates track by $index">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="mb-0">
                                <button ng-if="$index==0" type="button" class="collapse-indicator btn btn-link p-0"
                                    data-toggle="collapse" data-target="#templateProps{{$index}}" aria-expanded="true">
                                    <i class="fa fa-file-lines"></i> {{
                                    'ui.admin.notifications.templates.defaultTemplate' |
                                    i18n }}
                                    <i class="fa fa-chevron-right"></i>
                                </button>
                                <button ng-if="$index!==0" type="button" class="collapse-indicator btn btn-link p-0"
                                    data-toggle="collapse" data-target="#templateProps{{$index}}" aria-expanded="true">
                                    <i class="fa fa-file-lines"></i> {{ 'ui.admin.notifications.templates.template' |
                                    i18n }} - {{template.lang}}
                                    <i class="fa fa-chevron-right"></i>
                                </button>
                            </h2>
                        </div>
                        <div class="collapse show" id="templateProps{{$index}}">
                            <div class="card-body container-fluid">
                                <!-- Template -->
                                <div class="form-group row" ng-if="$index!==0">
                                    <label class="col-sm-12 col-md-3 control-label">
                                        {{ 'ui.admin.notifications.templates.templateLanguage' | i18n }}
                                    </label>
                                    <div class="col-sm-12 col-md-9">
                                        <input autocomplete="__away" type="text" maxlength="64" ng-model="template.lang"
                                            name="notificationTemplateDefaultSubject" class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-12 col-md-3 control-label">
                                        {{ 'ui.admin.notifications.templates.templateSubject' | i18n }}
                                    </label>
                                    <div class="col-sm-12 col-md-9">
                                        <input autocomplete="__away" type="text" maxlength="64"
                                            ng-model="template.subject" name="notificationTemplateDefaultSubject"
                                            class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-sm-12 col-md-3 control-label">
                                        {{ 'ui.admin.notifications.templates.templateBody' | i18n }}
                                    </label>
                                    <div class="col-sm-12 col-md-9">
                                        <input autocomplete="__away" type="text" ng-model="template.body"
                                            name="notificationTemplateDefaultSubject" class="form-control" />
                                    </div>
                                </div>
                            </div>
                            <button type="button" ng-if="$index!==0" ng-click="formData.templates.splice($index, 1)"
                                class="btn btn-danger"><i class="fas fa-fw fa-times-circle"></i> {{
                                'ui.admin.notifications.templates.removeTemplate' | i18n }}
                            </button>
                        </div>
                    </div>
                </li>

                <li>
                    <div class="card">
                        <div class="card-header">
                            <h2 class="mb-0">
                                <button type="button" class="collapse-indicator btn btn-link p-0"
                                    ng-click="formData.templates.push(newTemplate); newTemplate = {}">
                                    <i class="fa fa-plus-circle"></i> Add New Template
                                </button>
                            </h2>
                        </div>
                    </div>
                </li>
            </ul>
        </div>

        <div class="float-right btn-group">
            <button type="button" ng-disabled="createNotificationTemplateForm.$invalid" class="btn btn-danger"
                id="saveNotificationTemplateButton">
                <i class="fas fa-times"></i> {{ 'ui.action.cancel' | i18n }}
            </button>
            <button type="button" ng-disabled="createNotificationTemplateForm.$invalid" class="btn btn-primary"
                id="saveNotificationTemplateButton">
                <i class="fas fa-pen-ruler"></i> {{ 'ui.admin.notifications.templates.saveDraft' | i18n }}
            </button>
            <button type="submit" ng-disabled="createNotificationTemplateForm.$invalid" class="btn btn-success"
                id="saveNotificationTemplateButton">
                <i class="fas fa-check"></i> {{ 'ui.admin.notifications.templates.publish' | i18n }}
            </button>
        </div>
    </form>

    {{formData}}
</div>