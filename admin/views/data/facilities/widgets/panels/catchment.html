<div xmlns="http://www.w3.org/1999/xhtml" xmlns:sdb="http://santedb.org/applet"
    oc-lazy-load="{name:'PlaceFacilityWidgetController', files: ['/org.santedb.admin/controllers/places/placeFacilityWidgetController.js'] }">
    <sdb:widget name="org.santedb.widget.admin.panel.facility.catchment" type="Panel"
        context="org.santedb.facility.admin.profile" size="Medium" order="20">
        <sdb:icon>fas fa-fw fa-globe-africa</sdb:icon>
        <sdb:description lang="en">Facilities</sdb:description>
    </sdb:widget>

    <div ng-if="!scopedObject">
        <i class="fas fa-spin fa-circle-notch"></i> {{ 'ui.wait' | i18n }}
    </div>

    <div ng-controller="PlaceFacilityWidgetController" ng-if="scopedObject">
        <entity-table id="facilityAssociationTable" type="Place" search-field="name.component.value"
            stateless="true"
            default-query="{ 'obsoletionTime' : 'null', _viewModel: 'fastView', 'relationship[DedicatedServiceDeliveryLocation].target' : scopedObject.id }"
            render="{ name: 'renderName', classConcept: 'renderClass', typeConcept: 'renderType', statusConcept: 'renderStatus' }"
            i18n-prefix="'ui.model.entity.'"
            item-actions="[ { name: 'view', sref: 'santedb-admin.data.place.view', demand: '1.3.6.1.4.1.33349.3.1.5.9.2.4', className: 'btn-info', icon: 'fa fa-eye' }, { name: 'remove', action: 'removeAssociatedPlace', demand: '1.3.6.1.4.1.33349.3.1.5.9.2.4.2.0', className: 'btn-danger', icon: 'fa fa-times' } ]"
            actions="[ { name: 'add', demand: '1.3.6.1.4.1.33349.3.1.5.9.2.4.2.0', action: 'addAssociatedFacility', className: 'btn-primary', icon: 'fa fa-plus-circle' }]"
            properties="[ 'name', 'classConcept', 'statusConcept' ]" />
    </div>

</div>