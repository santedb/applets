<!--
 - Copyright 2021-2025 SanteSuite Contributors (See NOTICE.md for full copyright notices)
 - Portions Copyright (C) 2019 - 2021, Fyfe Software Inc. and the SanteSuite Contributors
 - Portions Copyright (C) 2015-2018 Mohawk College of Applied Arts and Technology
 - 
 - Licensed under the Apache License, Version 2.0 (the "License"); you 
 - may not use this file except in compliance with the License. You may 
 - obtain a copy of the License at 
 - 
 - http://www.apache.org/licenses/LICENSE-2.0 
 - 
 - Unless required by applicable law or agreed to in writing, software
 - distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 - WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the 
 - License for the specific language governing permissions and limitations under 
 - the License.
 -->
<div xmlns="http://www.w3.org/1999/xhtml">
    <div class="actEntryForm w-100" ng-if="initialized">
        <div ng-if="::model.$templateUrl" ng-init="act = model">
            <ng-include src="model.$templateUrl" />
        </div>

        <div class="actInputList mb-3" ng-if="::!model.$templateUrl">
            <!-- Header Information for the core act-->
            <div class="scroll-sticky">
                <div class="actHeader object-header card d-none">
                    <div class="row">
                        <!-- Template -->
                        <label class="col-sm-12 col-md-3 col-xl-2 control-label">
                            {{ 'ui.model.act.template' | i18n }}
                        </label>

                        <div class="col-sm-12 col-md-9 col-xl-4 pt-2">
                            <i class="fas fa-fw fa-table-cells"></i>
                            {{ model.templateModel.name }}
                            <span class="badge badge-primary">{{ model.typeConceptModel | concept }}</span>
                        </div>

                        <!-- Participant -->
                        <label class="col-sm-12 col-md-3 col-xl-2 control-label">
                            {{ 'ui.model.act.participation.RecordTarget' | i18n }}
                        </label>

                        <div class="col-sm-12 col-md-9 col-xl-4 pt-2">
                            <i class="fas fa-fw" ng-class="{
                            'fa-person' : model.participation.RecordTarget[0].playerModel.classConcept == 'bacd9c6f-3fa9-481e-9636-37457962804d', 
                            'fa-box': model.participation.RecordTarget[0].playerModel.classConcept == 'b76ff324-b174-40b7-a6ac-d1fdf8e23967'
                        }"></i>
                            {{ model.participation.RecordTarget[0].playerModel.name | name }}
                        </div>

                        <!-- Location -->
                        <label class="col-sm-12 col-md-3 col-xl-2 control-label">
                            {{ 'ui.model.act.participation.Location' | i18n }}
                        </label>

                        <div class="col-sm-12 col-md-9 col-xl-4 pt-2">
                            <i class="fas fa-fw fa-house-chimney-medical"></i>
                            {{ model.participation.Location[0].playerModel.name | name }}
                        </div>

                        <!-- Act Time -->
                        <label class="col-sm-12 col-md-3 col-xl-2 control-label">
                            {{ 'ui.model.act.actTime' | i18n }}
                        </label>

                        <div class="col-sm-12 col-md-9 col-xl-4 pt-2">
                            <div ng-if="model.startTime || model.stopTime">
                                <span ng-if="model.startTime">{{ 'ui.model.act.startTime' | i18n }} <i
                                        class="fas fa-fw fa-clock"></i> {{ model.startTime | extDate: 'M' }}</span>
                                <span ng-if="model.stopTime">{{ 'ui.model.act.stopTime' | i18n }} <i
                                        class="fas fa-fw fa-clock"></i> {{ model.startTime | extDate: 'M' }}</span>
                            </div>
                            <div ng-if="!model.startTime &amp;&amp; !model.stopTime">
                                <i class="fas fa-fw fa-clock"></i> {{ model.actTime | extDate: 'M' }}
                            </div>
                        </div>

                        <!-- Performer -->
                        <label class="col-sm-12 col-md-3 col-xl-2 control-label">
                            {{ 'ui.model.act.participation.Performer' | i18n }}
                        </label>

                        <div class="col-sm-12 col-md-9 col-xl-4 pt-2 d-flex justify-content-between">
                            <span class="mr-2" ng-repeat="aut in model.participation.Authororiginator track by $index">
                                <i class="fas fa-fw fa-user-doctor"></i> {{ aut.playerModel.name | name }}
                            </span>
                            <span class="mr-2" ng-repeat="aut in model.participation.Performer track by $index">
                                <i class="fas fa-fw fa-user-doctor"></i> {{ aut.playerModel.name | name }}
                            </span>
                        </div>

                        <!-- Informant -->
                        <label class="col-sm-12 col-md-3 col-xl-2 control-label" ng-if="model.participation.Informant">
                            {{ 'ui.model.act.participation.Informant' | i18n }}
                        </label>

                        <div class="col-sm-12 col-md-9 col-xl-4 pt-2" ng-if="model.participation.Informant">
                            <i class="fas fa-fw fa-person"></i> {{ model.participation.Informant[0].playerModel.name |
                            name }}
                        </div>

                        <!-- _HasComponent -->
                        <label class="col-sm-12 col-md-3 col-xl-2 control-label"
                            ng-if="model.relationship._HasComponent">
                            {{ 'ui.model.act.participation._HasComponent' | i18n }}
                        </label>

                        <div class="col-sm-12 col-md-9 col-xl-4" ng-if="model.relationship._HasComponent">
                            <i class="fas fa-fw fa-list-check"></i> {{
                            model.relationship._HasComponent.holderModel.typeConceptModel | concept }}
                            <span
                                ng-repeat="dst in model.relationship._HasComponent.holderModel.participation.Destination track by $index">
                                <i class="fas fa-map-pin mr-1"></i> {{ dst.playerModel.name | name }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- START CURRENT ENTRY -->

            <ul class="nav nav-tabs editOnly d-none">
                <li class="nav-item">
                    <button class="nav-link active" data-toggle="tab" data-target="#current-actions">
                        <i class="fas fa-fw fa-list-check"></i> {{ 'ui.model.act.tag.isBackentryFalse' | i18n }}
                    </button>
                </li>
                <li class="nav-item" ng-if="referenceActions.length > 0">
                    <button class="nav-link" data-toggle="tab" data-target="#referenceDataTab">
                        <i class="fas fa-fw fa-notes-medical"></i>
                        {{ 'ui.model.act.relationship.RefersTo' | i18n }}
                    </button>
                </li>
                <!-- <li class="nav-item actBackEntry" ng-if="backEntryActions.length > 0">
                    <button class="nav-link" data-toggle="tab" data-target="#historyActionTab">
                        <i class="fas fa-fw fa-clock-rotate-left"></i>
                        {{ 'ui.model.act.tag.isBackentryTrue' | i18n }}
                    </button>
                </li> -->
            </ul>

            <div class="tab-content">

                <div class="tab-pane fade show active" id="current-actions" role="tabpanel"
                    aria-labelledby="current-actions-tab">
                    <ul class="overflow-auto list-group">
                        <li ng-if="currentActions.length == 0">
                            <div class="m-auto empty-act-edit-instructions">
                                <i class="fas fa-fw fa-info-circle"></i> {{ 'ui.model.patientEncounter.empty' | i18n }}
                            </div>
                        </li>
                        <li class="my-2 list-group-item d-flex flex-column border-top"
                            id="action{{ comp.targetModel.id }}" ng-repeat="comp in currentActions track by comp.target"
                            data-actindex="{{$index}}" ng-if="comp !== null"
                            ng-class="{ 'bg-secondary bg-lighten-50' : comp.targetModel.tag.isBackEntry, 'bg-success text-dark bg-lighten-75' : comp.targetModel.operation == '3' || comp.targetModel.operation == 'InsertOrUpdate', 'bg-danger bg-lighten-50 text-white' : comp.operation == '4', 'bg-light' : $index % 2 == 1 }">
                            <div class="alert alert-info" ng-if="comp.targetModel.relationship.IsDerivedFrom">
                                <i class="fas fa-fw fa-lightbulb"></i> {{ 'ui.model.act.relationship.IsDerivedFrom.cdss'
                                | i18n }}
                            </div>
                            <div class="templateInfoDiv d-flex justify-content-between">

                                <div class="mx-2 py-1">
                                    <i class="fas fa-fw"
                                        ng-class="::getTemplateInfo(comp.targetModel.template || comp.targetModel.templateModel.mnemonic).icon"></i>
                                    {{ getTemplateInfo(comp.targetModel.template || comp.targetModel.templateModel.mnemonic).name | i18n }}

                                    <i class="fas fa-fw fa-shield ml-2 text-danger"
                                        ng-if="comp.targetModel.policy.length &gt; 0"></i>
                                </div>
                                <div class="mx-2" ng-if="!(comp.targetModel.policy.length &gt; 0)">
                                    <span
                                        ng-if="!comp.targetModel._overwriteActTime || comp.targetModel.statusConcept === 'afc33800-8225-4061-b168-bacc09cdbae3'">
                                        {{ comp.targetModel.actTime | humanDate: 'M' }}
                                        <button type="button" class="btn btn-primary p-1 text-center"
                                            ng-click="comp.targetModel._overwriteActTime = true"
                                            ng-disabled="comp.targetModel.statusConcept === 'afc33800-8225-4061-b168-bacc09cdbae3'">
                                            <i class="fas fa-fw fa-pencil"></i>
                                        </button>
                                    </span>
                                    <div class="input-group"
                                        ng-if="comp.targetModel._overwriteActTime &amp;&amp; comp.targetModel.statusConcept !== 'afc33800-8225-4061-b168-bacc09cdbae3'">
                                        <input type="datetime-local" ng-model="comp.targetModel.actTime"
                                            class="form-control"
                                            max="{{ $root.page.maxEventTime | date: 'yyyy-MM-ddTHH:mm' }}"
                                            min="{{ model.startTime | date: 'yyyy-MM-ddTHH:mm'}}" step="60"
                                            required="required" />
                                        <button type="button" class="btn btn-success text-center"
                                            ng-click="comp.targetModel._overwriteActTime = false">
                                            <i class="fas fa-fw fa-check-circle"></i>
                                        </button>
                                    </div>
                                </div>

                            </div>

                            <div class="d-flex justify-content-left mb-2">
                                <!-- PROPOSE Should allow users to select an override -->
                                <div class="actProposeControl editOnly d-none" ng-if="!comp.targetModel.tag.isBackEntry &amp;&amp; 
                                        (
                                            !comp.targetModel.tag.$userAdded &amp;&amp; comp.targetModel.statusConcept != 'afc33800-8225-4061-b168-bacc09cdbae3' &amp;&amp; 
                                            (
                                                comp.targetModel.moodConcept == 'acf7baf2-221f-4bc2-8116-ceb5165be079' || 
                                                comp.targetModel.relationship.Fulfills[0].targetModel.moodConcept == 'acf7baf2-221f-4bc2-8116-ceb5165be079'
                                            )
                                        )">
                                    <label class="checkbox-container">
                                        <input type="checkbox" class="checkbox-control"
                                            ng-model="comp.targetModel.isNegated" id="negate{{$index}}"
                                            ng-true-value="false" ng-false-value="true"
                                            ng-change="loadReasonConcept(compt.targetModel)" />
                                        <span></span>
                                    </label>
                                </div>

                                <!-- Render the main act entry content -->
                                <div class="flex-grow-1 actEntryComponent my-auto editOnly">
                                    <div ng-if="!comp.targetModel.isNegated" ng-init="act = comp.targetModel"
                                        ng-class="{ 'actEntryComponentRemoved' : comp.operation == '4' }">
                                        <ng-include
                                            src="::resolveTemplate(comp.targetModel.templateModel.mnemonic)"></ng-include>
                                    </div>
                                    <div ng-if="comp.targetModel.isNegated">
                                        <div class="input-group mb-0">
                                            <label class="control-label mr-2">
                                                {{ ::comp.targetModel.typeConceptModel | concept }}

                                                <span ng-if="comp.targetModel.participation.Product[0].playerModel">
                                                    : {{
                                                    comp.targetModel.participation.Product[0].playerModel.name.Assigned
                                                    | name }}
                                                </span>
                                            </label>

                                            <div class="input-group-prepend">
                                                <span class="input-group-text">
                                                    {{ 'ui.model.act.isNegated.reason' | i18n }}
                                                </span>
                                            </div>

                                            <concept-select ng-model="comp.targetModel.reasonConcept"
                                                concept-set="'ProtocolViolationReason'" required="required"
                                                class="form-control h-auto" name="violationReason{{$index}}"
                                                ng-change="loadReasonConcept(comp.targetModel)" />
                                        </div>

                                        <div class="text-danger"
                                            ng-if="ownerForm['violationReason' + $index].$error['required']">
                                            <i class="fas fa-fw fa-exclamation-triangle"></i> {{ 'ui.error.required' |
                                            i18n }}
                                        </div>
                                    </div>
                                </div>

                                <div class="viewOnly actEntryComponent my-auto flex-grow-1"
                                    ng-if="model.statusConcept === 'afc33800-8225-4061-b168-bacc09cdbae3'">
                                    <div ng-if="editEntry.$editIndex !== $index"
                                        ng-class="{ 'actEntryComponentRemoved' : comp.targetModel.statusConcept == 'cd4aa3c4-02d5-4cc9-9088-ef8f31e321c5'}"
                                        ng-init="act = comp.targetModel">
                                        <ng-include
                                            src="::resolveView(comp.targetModel.templateModel.mnemonic)"></ng-include>
                                    </div>
                                    <div ng-if="editEntry.$editIndex === $index">
                                        <form name="ownerForm" ng-submit="saveAmendment(ownerForm)"
                                            novalidate="novalidate" ng-init="act = editEntry"
                                            class="d-flex flex-column">
                                            <ng-include
                                                src="::resolveTemplate(comp.targetModel.templateModel.mnemonic)"></ng-include>
                                            <div class="d-flex justify-content-end">
                                                <div class="btn-group">
                                                    <button type="submit" class="btn btn-primary" id="saveAmendment"
                                                        ng-disabled="ownerForm.$invalid">
                                                        <i class="fas fa-fw fa-check"></i> <span
                                                            class="d-none d-lg-inline">{{
                                                            'ui.action.save' | i18n }}</span>
                                                    </button>
                                                    <button type="button" class="btn btn-danger" id="cancelAmendment"
                                                        ng-click="cancelEdit()">
                                                        <i class="fas fa-fw fa-times"></i> {{ 'ui.action.cancel' | i18n
                                                        }}
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <div class="viewOnly d-none btn-group"
                                    ng-if="comp.targetModel.statusConcept == 'afc33800-8225-4061-b168-bacc09cdbae3' &amp;&amp; !comp.targetModel.tag['$pep.masked']">
                                    <button type="button" id="btnEdit{{$index}}"
                                        ng-click="editItem(comp.targetModel, $index)" class="btn btn-primary"
                                        ng-if="!editEntry"
                                        ng-disabled="comp.targetModel.creationTime.greaterOf(model.stopTime || model.creationTime).age('hour') &gt; 24">
                                        <i class="fas fa-fw fa-pencil"></i> <span class="d-none d-lg-inline">{{
                                            'ui.action.edit' | i18n }}</span>
                                    </button>
                                    <button type="button" id="btnNullify{{$index}}"
                                        ng-click="nullifyItem(comp.targetModel, $index)" class="btn btn-danger"
                                        ng-if="!editEntry">
                                        <i class="fas fa-fw fa-ban"></i> <span class="d-none d-lg-inline">{{
                                            'ui.action.nullify' | i18n }}</span>
                                    </button>

                                </div>
                            </div>

                            <!-- Performer -->
                            <div class="row justify-content-center" ng-if="editEntry.$editIndex !== $index">
                                <div ng-if="comp.targetModel.participation.Performer &amp;&amp; comp.targetModel.statusConcept == 'afc33800-8225-4061-b168-bacc09cdbae3'"
                                    class="alert alert-secondary d-flex my-auto p-2">
                                    <h5 class="align-self-center text-success my-auto"><i
                                            class="m-auto fas fa-fw fa-check-circle"></i></h5>
                                    <div class="d-flex flex-column my-auto">
                                        <div>
                                            <i class="fas fa-fw fa-user-doctor"></i> {{
                                            comp.targetModel.participation.Performer[0].playerModel.name | name }}
                                        </div>
                                        <div
                                            ng-repeat="sec in comp.targetModel.participation.SecondaryPerformer track by $index">
                                            <i class="fas fa-fw fa-user-nurse"></i> {{ sec.playerModel.name | name }}
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="comp.targetModel.statusConcept == 'cd4aa3c4-02d5-4cc9-9088-ef8f31e321c5'"
                                    class="alert alert-danger d-flex my-auto p-2">
                                    <h5 class="align-self-center text-danger my-auto"><i
                                            class="m-auto fas fa-fw fa-ban"></i></h5>
                                    <div class="d-flex flex-column my-auto">
                                        <span>{{ 'ui.model.act.statusConcept.nullified' | i18n}}</span>
                                        <div ng-repeat="de in comp.targetModel.participation.Verifier track by $index">
                                            <i class="fas fa-fw fa-user"></i> {{
                                            de.playerModel.name | name }}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Amendment -->
                            <div class="row viewOnly"
                                ng-repeat="amendment in comp.targetModel.relationship.Replaces track by $index">
                                <div class="col-12 pt-2">
                                    <div class="alert alert-info">
                                        <button class="btn btn-link w-100 p-0 m-0" type="button"
                                            data-target="#amendment{{comp.target}}" data-toggle="collapse"
                                            aria-expanded="false">
                                            <h6 class="m-0 mx-1 px-1 p-0">
                                                <div class="d-flex justify-content-start ">
                                                    <i class="fas fa-fw fa-pen-to-square"></i>
                                                    <span class="flex-grow-1 d-none d-lg-inline ml-1 text-left">
                                                        <span class="ml-1"
                                                            ng-repeat="aut in amendment.targetModel.participation.Authororiginator track by $index">
                                                            <i class="fas fa-fw fa-user"></i> {{
                                                            aut.playerModel.name |
                                                            name }}
                                                        </span>
                                                    </span>
                                                    <span>
                                                        <span class="d-none d-sm-inline">
                                                            <i class="fas fa-fw fa-clock"></i> {{
                                                            amendment.targetModel.creationTime | humanDate: 'M' }}
                                                        </span>
                                                    </span>
                                                </div>
                                            </h6>
                                        </button>

                                        <div class="collapse out" id="amendment{{comp.target}}"
                                            ng-init="act = amendment.targetModel">
                                            <ng-include
                                                src="::resolveView(amendment.targetModel.templateModel.mnemonic)" />
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Buttons -->
                            <div ng-if="comp.targetModel.statusConcept != 'afc33800-8225-4061-b168-bacc09cdbae3' || comp.targetModel.tag.isBackEntry"
                                class="d-flex my-2 justify-content-end col-10 offset-1">
                                <div class="editOnly btn-group">
                                    <!-- Complete -->
                                    <button ng-if="comp.operation == '4' || !comp.targetModel.tag.isBackEntry"
                                        id="action_{{$index}}complete" type="button" ng-click="markComplete($index)"
                                        class="btn btn-primary mr-2">
                                        <i class="fas fa-fw fa-check"></i>
                                        <span class="d-lg-inline">
                                            {{ 'ui.action.complete' | i18n }}
                                        </span>
                                    </button>

                                    <!-- Back Entry -->
                                    <button type="button" ng-click="moveHistory($index)"
                                        ng-disabled="comp.operation == 4"
                                        class="btn btn-dark actMoveToHistory mr-2 d-none"
                                        ng-if="!comp.targetModel.tag.$userAdded &amp;&amp; !comp.targetModel.isNegated &amp;&amp; canBackEnter(comp.targetModel.template || comp.targetModel.templateModel.mnemonic)">
                                        <i class="fas fa-fw"
                                            ng-class="{ 'fa-clock-rotate-left' : !comp.targetModel.tag.isBackEntry, 'fa-arrow-rotate-right' : comp.targetModel.tag.isBackEntry}"></i>
                                        <span class="d-lg-inline">
                                            <span ng-if="comp.targetModel.tag.isBackEntry">{{ 'ui.action.undo' | i18n }}
                                            </span>{{ 'ui.action.historical' | i18n }}
                                        </span>
                                    </button>

                                    <div ng-if="!(comp.targetModel.moodConcept == 'acf7baf2-221f-4bc2-8116-ceb5165be079' || comp.targetModel.relationship.Fulfills[0].targetModel.moodConcept == 'acf7baf2-221f-4bc2-8116-ceb5165be079')"
                                        class="actRemoveItem editOnly btn-group d-none">
                                        <!-- Remove -->
                                        <button type="button" ng-click="removeItem($index)" class="btn btn-danger"
                                            ng-if="comp.operation != '4'">
                                            <i class="fas fa-fw fa-times-circle"></i>
                                            <span class="d-lg-inline">
                                                {{ 'ui.action.remove' | i18n }}
                                            </span>
                                        </button>

                                        <!-- Undo -->
                                        <button type="button" ng-click="comp.operation = undefined"
                                            class="btn btn-success" ng-if="comp.operation == '4'">
                                            <i class="fa-solid fa-arrow-rotate-left"></i>
                                            <span class="d-lg-inline">
                                                {{ 'ui.action.undo' | i18n }} {{ 'ui.action.remove' | i18n }}
                                            </span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="tab-pane fade" id="referenceDataTab" role="tabpanel" aria-labelledby="reference-link-tab">
                    <ul class="overflow-auto list-group">
                        <li class="list-group-item" ng-repeat="(tpl, acts) in referenceActions track by $index">
                            <ng-include src="resolveViewTemplate(tpl)"></ng-include>
                        </li>
                    </ul>
                </div>

                <!-- <div id="historyActionTab" class="tab-pane editOnly d-none">
                    <ul class="overflow-auto list-group">
                        <li class="list-group-item" ng-repeat="(tpl, acts) in backEntryActions track by $index">
                            <ng-include src="resolveBackentryTemplate(tpl)"></ng-include>
                        </li>
                    </ul>
                </div> -->

            </div>

            <!-- Errors -->
            <div ng-if="ownerForm.$invalid" class="text-danger font-weight-bold">
                <i class="fas fa-fw fa-exclamation-triangle"></i> {{ 'error.actEdit.incomplete' | i18n }}
            </div>

            <div class="btn-group col-12 p-0 mt-3">
                <div class="dropup btn-group">
                    <button type="button" class="btn btn-dark dropdown-toggle editOnly actAddItem d-none"
                        data-display="static" data-toggle="dropdown" data-target="#addActionDropdown"
                        aria-haspopup="true" id="btnAddAction">
                        <i class="fas fa-fw fa-plus-circle"></i> {{ 'ui.action.add' | i18n }}
                    </button>

                    <div class="dropdown-menu overflow-auto" style="max-height: 35vh;" id="addActionDropdown">
                        <button class="dropdown-item" type="button" ng-click="addItem(tpl)"
                            ng-repeat="tpl in availableTemplates track by $index">
                            <i ng-class="tpl.icon"></i> {{ tpl.name | i18n }}
                        </button>

                        <div class="dropdown-divider"></div>

                        <div class="dropdown-item">
                            <input type="search" ng-model="searchTemplateString"
                                id="txtActEditSearch"
                                ng-change="doFilter(searchTemplateString)" class="form-control"
                                placeholder="{{ 'ui.action.search' | i18n }}" />
                        </div>
                    </div>
                </div>

                <div ng-repeat="action in actions track by $index" ng-if="filterAction(action)"
                    class="btn-group float-right" ng-class="{ 'dropup' : action.children }">
                    <button class="btn" ng-click="action.children ? null : doAction(action)"
                        ng-class="[{ 'dropdown-toggle' : action.children }, action.className]"
                        data-toggle="{{ action.children ? 'dropdown' : null }}" demand="{{action.demand}}"
                        type="{{ action.type || 'button' }}" id="btnActEdit{{action.name}}"
                        ng-disabled="action.validOnly &amp;&amp; ownerForm.$invalid">
                        <i class="fas fa-fw" ng-class="action.icon"></i>
                        {{ action.label || 'ui.action.' + action.name | i18n }}
                    </button>

                    <div class="dropdown-menu" data-display="static">
                        <button class="dropdown-item" type="button" ng-click="doAction(child, { id: child.id }, $index)"
                            ng-repeat="child in action.children track by $index">
                            <i class="fas fa-fw" ng-class="child.icon"></i>
                            {{ child.label || 'ui.action.' + child.name | i18n }}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>