<!--
 - Copyright 2021-2025 SanteSuite Contributors (See NOTICE.md for full copyright notices)
 - Portions Copyright (C) 2019 - 2021, Fyfe Software Inc. and the SanteSuite Contributors
 - Portions Copyright (C) 2015-2018 Mohawk College of Applied Arts and Technology
 - 
 - Licensed under the Apache License, Version 2.0 (the "License"); you 
 - may not use this file except in compliance with the License. You may 
 - obtain a copy of the License at 
 - 
 - http://www.apache.org/licenses/LICENSE-2.0 
 - 
 - Unless required by applicable law or agreed to in writing, software
 - distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 - WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the 
 - License for the specific language governing permissions and limitations under 
 - the License.
 -->
<div xmlns="http://www.w3.org/1999/xhtml" class="mb-1 scroll-sticky object-header">
    <div class="card">
        <div class="card-body" ng-if="!entity">
            <i class="fas fa-circle-notch fa-spin"></i> {{ 'ui.wait' | i18n }}
        </div>
        <div class="card-body container-fluid p-2" ng-if="entity">
            <div class="row">
                <div class="col-6">
                    <div class="p-2 flex-grow-1 d-flex">
                        <h5 class="m-0"><i ng-if="entity.$icon" class="fas fa-fw" ng-class="entity.$icon"></i> {{
                            entity.name | name }} <span class="badge badge-info mr-2">{{
                                entity.classConceptModel | concept }}</span> <span class="badge badge-primary mr-2" ng-if="entity.typeConceptModel">
                                    {{ entity.typeConceptModel | concept }}
                                </span>
                        </h5>
                        
                        <div class="d-inline btn-group"><button ng-if="setState" id="btnSetState" type="button"
                                data-toggle="dropdown" class="p-2 btn btn-sm"
                                ng-class="{ 'btn-primary' : entity.statusConcept == 'c8064cbd-fa06-4530-b430-1a52f1530c27' , 'btn-success' : entity.statusConcept == 'c34fcbf1-e0fe-4989-90fd-0dc49e1b9685' , 'btn-warning' : entity.statusConcept == '0bbec253-21a1-49cb-b376-7fe4d0592cda', 'btn-danger' : entity.statusConcept == 'cd4aa3c4-02d5-4cc9-9088-ef8f31e321c5', 'btn-dark' : entity.statusConcept == 'bdef5f90-5497-4f26-956c-8f818cce2bd2' }">
                                {{ entity.statusConceptModel | concept }} <i class="fas fa-chevron-down"></i>
                                <div class="dropdown-menu" style="z-index: 100">
                                    <a class="btn btn-link dropdown-item"
                                        ng-if="entity.statusConcept != 'c8064cbd-fa06-4530-b430-1a52f1530c27'"
                                        ng-click="setState('c8064cbd-fa06-4530-b430-1a52f1530c27')"><i
                                            class="fas fa-circle text-primary"></i> Activate</a>
                                    <a class="btn btn-link dropdown-item"
                                        ng-if="entity.statusConcept != '0bbec253-21a1-49cb-b376-7fe4d0592cda'"
                                        ng-click="setState('0bbec253-21a1-49cb-b376-7fe4d0592cda')"><i
                                            class="fas fa-circle text-warning"></i> Inactivate</a>
                                    <a class="btn btn-link dropdown-item"
                                        ng-if="entity.statusConcept != 'bdef5f90-5497-4f26-956c-8f818cce2bd2'"
                                        ng-click="setState('bdef5f90-5497-4f26-956c-8f818cce2bd2')"><i
                                            class="fas fa-circle text-dark"></i> Obsolete</a>
                                    <a class="btn btn-link dropdown-item"
                                        ng-if="entity.statusConcept != 'cd4aa3c4-02d5-4cc9-9088-ef8f31e321c5'"
                                        ng-click="setState('cd4aa3c4-02d5-4cc9-9088-ef8f31e321c5')"><i
                                            class="fas fa-circle text-danger"></i> Nullify</a>
                                </div>
                            </button>
                            <button ng-if="download" type="button" demand="1.3.6.1.4.1.33349.3.1.5.9.2.500"
                                ng-click="download()" class="btn btn-info"><i class="fas fa-download"></i> {{
                                'ui.action.download' | i18n }}</button>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <div class="p-2 flex-grow-1 float-right">
                        <h5 class="m-0 p-0">
                            <div>
                                <div class="p-2"
                                    ng-if="id[0].value &amp;&amp; domain != $root.system.config.application.setting['aa.preferred']"
                                    ng-repeat="(domain, id) in entity.identifier track by $index">
                                    <i class="far fa-id-card"></i> {{ id[0].value }}
                                    <span ng-if="id[0].checkDigit">({{id[0].checkDigit}})</span>
                                    <span class="badge badge-info">{{ id[0].domainModel.name }}</span>
                                </div>
                            </div>
                        </h5>
                    </div>
                </div>
                <div class="col-sm-12">
                    <div class="d-flex flex-wrap justify-content-between">
                        <div class="p-2" ng-if="entity.address"><i class="fas fa-home"></i> {{ entity.address | address
                            }}</div>
                        <div class="p-2" ng-if="entity.telecom"><i class="fas fa-home"></i> {{ entity.telecom | telecom
                            }}</div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <ng-include src="'/_dynamic/EntityHeaderExtensions.html'" />
    

</div>